<!doctype html>
<html lang="en">
   <head>
      <!-- Required meta tags -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <!-- Bootstrap CSS -->
      <!--link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous"-->
      <link href="/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
       <style>
         .wrapper {
         display: grid;
         grid-template-columns: repeat(5, 1fr);
         gap: 10px;
         }
      </style>
      <title>National Book Week 2023</title>
   </head>
   <body class="bg-dark">
      <div id="" class="content mt-3">
         <div class="container-fluid one">
            <div class="row d-flex justify-content-center">
               <div class="col-lg-10 col-md-5 text-center">
                  
                  <style>
                     button{
                        width: 167px;
                        height: 240px;                        
                     }

                  </style>
                 <h4 class="text-white">Greatings</h4>
                  <div class="btn-group btn-block btn-lg" role="group" aria-label="Basic example">
                    <button id="p0" class="btn btn-success " onclick="sendCommand('gmeng', '')">Goodmorning</button>
                    <button id="p1" type="button" class="btn btn-lg  btn-primary p1" onclick="sendCommand('gmtag', '')">Magandang Umaga</button>
                    <button id="p2" type="button" class="btn  btn-secondary p2" onclick="sendCommand('gmbicol', '')">Marhay na aga</button>
                    <button id="p3" type="button" class="btn  btn-warning p3" onclick="sendCommand('afternoon', '')">Good Afternoon</button>
                    <button id="p4" type="button" class="btn  btn-info p3" onclick="sendCommand('goodday', '')">Good Day</button>
                    <button id="p4" type="button" class="btn  btn-danger p3" onclick="sendCommand('bakit', '')">bakit?</button>
                 </div>
                 <h4 class="text-white">Command</h4>
                  <div class="btn-group btn-block btn-lg" role="group" aria-label="Basic example">
                     <button id="p0" class="btn btn-success " onclick="sendCommand('excuse', '')">Excuse Me</button>
                     <button id="p1" type="button" class="btn btn-lg  btn-primary p1" onclick="sendCommand('uform', '')">Asan Uniform mo?</button>
                     <button id="p2" type="button" class="btn  btn-secondary p2" onclick="sendCommand('timein', '')">Time in ka</button>
                     <button id="p3" type="button" class="btn  btn-warning p3" onclick="sendCommand('tybye', '')">Thank You</button>
                     <button id="p4" type="button" class="btn  btn-info p3" onclick="sendCommand('hmiss', '')">Hey MIss</button>
                     <button id="p4" type="button" class="btn  btn-danger p3" onclick="sendCommand('hsirr', '')">Hey Sir</button>
                  </div>
                  <h4 class="text-white">Util</h4>
                  <div class="btn-group btn-block btn-lg" role="group" aria-label="Basic example">
                    <button id="p0" class="btn btn-success " onclick="sendCommand('isaisa', '')">Isa isa pila</button>
                    <button id="p1" type="button" class="btn btn-lg  btn-primary p1" onclick="sendCommand('nounif', '')">bawal pumasok no uniform</button>
                    <button id="p2" type="button" class="btn  btn-secondary p2" onclick="sendCommand('ok', '')">ok</button>
                    <button id="p3" type="button" class="btn  btn-warning p3" onclick="sendCommand('ingay', '')">Ingay nyo</button>
                    <button id="p4" type="button" class="btn  btn-info p3" onclick="sendCommand('wingay', '')">Wag nga kayo ma ingay</button>
                    <button id="p4" type="button" class="btn  btn-danger p3" onclick="sendCommand('inmuna', '')">IN muna</button>
                 </div>
                 <div class="btn-group btn-block btn-lg" role="group" aria-label="Basic example">
                    <button id="p0" class="btn btn-success " onclick="sendCommand('waitinmuna', '')">Sandali walang papasok!</button>
                    <button id="p0" class="btn btn-success " onclick="sendCommand('rda', '')">Random fname rda</button>
                 </div>
                  
               </div>
            </div>
           
         </div>
      </div>
      <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <!--script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script-->
       
       <script src="/node_modules/jquery/dist/jquery.slim.min.js"></script>
       
      <!--script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script-->
       
       <script src="/node_modules/jquery/dist/jquery.min.js"></script>
       
      <!--script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script-->
       
       <script src="/node_modules/popper.js/dist/umd/popper.min.js"></script>
       
      <!--script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script-->
       
       <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
      <script>
         const socket = new WebSocket('ws://10.2.42.91:4000');
         
         socket.onopen = () => {
           console.log('Connected to the server');
         };
         //COrrect Sound
           function btncorrect(){
                const audio = new Audio("/assets/sound/correct.mp3");
                audio.play();
           }
          function WrongSound(){
                sendCommand('sound', 'wrong');
                const audio = new Audio("/assets/sound/wrong.mp3");
                audio.play();
          }
         
         // Function to get keys and values from the JSON object
         function getKeysAndValues(jsonObj) {
             var result = [];
             var quest = [];
             
             for (var key in jsonObj) {
                 var values = jsonObj[key].map(function(value) {
                     return value;
                 });
                 
                 quest.push("<option>"+ key +"</option>");
         
                 result.push({
                     key: key,
                     values: values
                 });
             }
             console.log(result)
             $('#dapquest').empty().html(quest);
             
             return result;
         }
         function loadQuestion(){
             // URL to your external JSON file
             var jsonFileUrl = '/assets/dap.json';
         
             // Use $.getJSON() to fetch the JSON data
             $.getJSON(jsonFileUrl, function(data) {
                 // Call the function with your JSON object
                 var keysAndValues = getKeysAndValues(data);
         
                 // Log the keys and values to the console
                 //console.log(keysAndValues);
                 return keysAndValues;
             })
             .fail(function(jqxhr, textStatus, error) {
                 var err = textStatus + ", " + error;
                 console.error("Error fetching data: " + err);
             });
         }
         
             
         const jsonFilePath = '/assets/dap.json';
         
         function sendMessage() {
           const messageInput = document.getElementById('message');
           const message = { message: messageInput.value };
           socket.send(JSON.stringify(message));
           messageInput.value = '';
         }
         
         
         
         function sendCommand(program, status){
            const cmd = {program: program, status: status};
            socket.send(JSON.stringify(cmd));
         }


         //util
         function sendUtil(program, action, value){
            const cmval = {program: program, action: action, value: value}
            socket.send(JSON.stringify(cmval))
         }


        
          
          
         //show Question
         $('#dapquest').on('change',  function(){
            var selq = $('#dapquest').val();
           
            var question = loadQuestion()
            console.log(question);
         })
         
         //BANNER SHOW HIDE
         $('#bannershow').on('click', function(){
            //alert('send');
             sendCommand('banner', 'show'); 
         });
         $('#bannerhide').on('click', function(){
            //alert('send');
             sendCommand('banner', 'hide'); 
         });
         //DAPAT ALAM MO   
         //Correct Answer Send 
          function Winner(status){
              sendUtil('dap', 'Winner', status)
          }
          function ShowAns(ans){
              var cscore = $('#cscore');
              var cval = Number(cscore.html())
              cscore.html(cval + 1);
              btncorrect()
              sendUtil('dap', 'answer' , ans)
          }
          
          function timesTwo(){
              btncorrect()
              var cscore = $('#cscore');
              var cval = Number(cscore.html())
              var ans = cval * 2;
              cscore.empty().html(ans);
              sendUtil('dap', 'score' , ans)
              
          }
          function timesTree(){
              btncorrect()
              var cscore = $('#cscore');
              var cval = Number(cscore.html())
              var ans = cval * 3;
              cscore.empty().html(ans);           
              sendUtil('dap', 'score' , ans)              
          }
          function ScoreA(){
               btncorrect()
               var cscore = $('#cscore');
              var atscore = $('#atscore');
               //current score 
               var curval = Number(atscore.val()); //teamScore
               var rscore =  Number(cscore.text()); //round score
               if(curval > 0){
                    atscore.empty().val(curval + rscore);
               }else{
                    atscore.empty().val(cscore.text())
               }  
              
              cscore.empty().html(0)
              
              sendUtil('dap','gets','teamA')
          }
           function ScoreB(){
               btncorrect()
               var cscore = $('#cscore');
              var btscore = $('#btscore');
               //current score 
               var curval = Number(btscore.val()); //teamScore
               var rscore =  Number(cscore.text()) //round score
               if(curval > 0){
                    btscore.empty().val(curval + rscore);
               }else{
                    btscore.empty().val(cscore.text())
               }
               
              cscore.empty().html(0)
              sendUtil('dap','gets','teamB')
          }
          
          function setScore(team){
               var atscore = $('#atscore');
               var btscore = $('#btscore');
              if(team == 'A'){
                  sendUtil('dap', 'mscoreA', atscore.val())
              }
              if(team == 'B'){
                  sendUtil('dap', 'mscoreB', btscore.val())
              }
          }
       
         //Util
         //Set team name 
         //A team
         $('#atbtn').on('click', function(){
            var tname = $('#ateam').val();
            sendUtil('dap', 'atname', tname);               
         });
         //B team
         $('#btbtn').on('click', function(){
            var tname = $('#bteam').val();
            sendUtil('dap', 'btname', tname);               
         });
         //Set Team Score
          /*
         //A team
         $('#atsbtn').on('click', function(){
           var tscore = $('#atscore').val();
           // sendUtil('dap', 'tscore', tscore)
         });
         //B team
          
         $('#btsbtn').on('click', function(){
           var tscore = $('#btscore').val();
           // sendUtil('dap', 'btscore', tscore)
         });
          */
         //SET ROUND         
          
          function setRound(){
               var cscore = $('#cscore');
               var round = $('#roundnum').val();
               sendUtil('dap', 'round', round);
              cscore.empty().html('0')
              
          }
          
          //claer Score
          function clearScore(){
              var cscore = $('#cscore');
              cscore.empty().html('0')
              sendUtil('dap', 'clear', 'score')
          }
         
         
         
         
         //QUESTION AND ANSWER
         $('#qa').on('click', function(){
            //alert('send');
             sendCommand('dap', 'show'); 
         });
          
          
          
         
         
      </script>
      <script defer src="/assets/admin.js"></script>
   </body>
</html>